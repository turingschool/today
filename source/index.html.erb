<script type="text/javascript">
  var dayOffset = window.location.origin.indexOf("today") > -1 ? 0 : 1;
  var currentTime = new Date(new Date().getTime() + dayOffset * 24 * 60 * 60 * 1000);
  var month       = (currentTime.getMonth() + 1).toString();
  var day         = currentTime.getDate().toString();
  if(month.length < 2) month = "0" + month;
  if(day.length   < 2) day   = "0" + day;

  var date       = currentTime.getFullYear().toString() + "-" + month + "-" + day;
  var knownDates = <%= all_outlines.map { |o| yyyy_mm_dd_for outline_date(o.path) }.inspect %>;

  if(knownDates.indexOf(date) > -1)
    window.location = "/outlines/" + date + "/";
  else
    window.location = "/all";
</script>
